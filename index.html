<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ghosty Advanced Deobfuscator v2</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<style>
    body { margin: 0; background: #000; color: #0ff; font-family: 'Orbitron', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
    .container { width: 95%; max-width: 900px; background: rgba(0, 10, 10, 0.98); padding: 25px; border-radius: 15px; box-shadow: 0 0 30px #0ff; text-align: center; border: 1px solid #066; }
    h1 { text-shadow: 0 0 15px #0ff; font-size: 24px; letter-spacing: 2px; }
    textarea { width: 100%; height: 200px; background: #000; border: 1px solid #0ff; color: #0ff; padding: 12px; border-radius: 8px; font-family: 'Courier New', monospace; margin-top: 10px; outline: none; box-shadow: inset 0 0 5px #0ff; }
    .btn { margin: 15px 5px; padding: 15px 30px; background: #000; color: #0ff; border: 1px solid #0ff; cursor: pointer; font-family: 'Orbitron'; font-weight: bold; transition: 0.3s; clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%); }
    .btn:hover { background: #0ff; color: #000; box-shadow: 0 0 20px #0ff; }
    .status { font-size: 12px; margin-top: 10px; font-weight: bold; text-transform: uppercase; }
    .label { display: block; text-align: left; font-size: 10px; margin-top: 15px; color: #0aa; }
</style>
</head>
<body>

<div class="container">
    <h1>GHOSTY DEOBFUSCATOR V2</h1>
    
    <span class="label">PASTE ENCRYPTED SCRIPT OR BASE64 STRING:</span>
    <textarea id="inputArea" placeholder="Paste var d = '...' or the long Base64 code here..."></textarea>
    
    <div class="controls">
        <button class="btn" onclick="deepDecrypt()">FORCE DECODE</button>
        <button class="btn" onclick="copyResult()">COPY CLEAN HTML</button>
    </div>

    <span class="label">DECRYPTED SOURCE:</span>
    <textarea id="outputArea" placeholder="Waiting for data..." readonly></textarea>
    <div class="status" id="status">SYSTEM READY</div>
    
    <footer style="margin-top: 25px; font-size: 10px; opacity: 0.4;">&copy; GHOSTY NETWORK - BYPASSING PROTECTION</footer>
</div>

<script>
function deepDecrypt() {
    let input = document.getElementById('inputArea').value;
    let status = document.getElementById('status');
    let output = document.getElementById('outputArea');
    
    try {
        // 1. Extract string between quotes if the whole script was pasted
        let b64Match = input.match(/"([^"]+)"/) || input.match(/'([^']+)'/);
        let b64String = b64Match ? b64Match[1] : input.trim();
        
        // 2. Clean the string (remove spaces, newlines, and tabs that break atob)
        b64String = b64String.replace(/\s/g, '');

        // 3. Robust Decoding (Handles UTF-8 properly)
        let binaryString = atob(b64String);
        let bytes = new Uint8Array(binaryString.length);
        for (let i = 0; i < binaryString.length; i++) {
            bytes[i] = binaryString.charCodeAt(i);
        }
        
        // Try decoding as UTF-8 first, fallback to escape method
        let decoded;
        try {
            decoded = new TextDecoder().decode(bytes);
        } catch(e) {
            decoded = decodeURIComponent(escape(binaryString));
        }
        
        output.value = decoded;
        status.innerText = "SUCCESS: SOURCE UNLOCKED";
        status.style.color = "#0ff";
    } catch (err) {
        console.error(err);
        output.value = "CRITICAL ERROR: The input is not a valid Base64 string or is double-encrypted. \n\nCheck if you copied the FULL string inside the quotes.";
        status.innerText = "DECODE FAILED";
        status.style.color = "#f00";
    }
}

function copyResult() {
    const output = document.getElementById("outputArea");
    if(output.value === "") return;
    output.select();
    document.execCommand("copy");
    alert("Clean source copied to clipboard!");
}
</script>

</body>
</html>
