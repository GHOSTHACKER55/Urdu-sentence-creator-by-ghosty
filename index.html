<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ghosty God-Mode Unpacker</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
<style>
    body { background: #000; color: #0ff; font-family: 'Orbitron', sans-serif; padding: 20px; text-align: center; }
    .box { max-width: 850px; margin: auto; background: #050505; padding: 25px; border: 1px solid #0ff; box-shadow: 0 0 30px #066; border-radius: 10px; }
    textarea { width: 100%; height: 180px; background: #000; border: 1px solid #0ff; color: #0ff; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 12px; }
    .btn { background: #0ff; color: #000; border: none; padding: 15px; cursor: pointer; font-weight: bold; width: 100%; letter-spacing: 2px; transition: 0.3s; margin-bottom: 10px; }
    .btn:hover { background: #fff; box-shadow: 0 0 20px #fff; }
    #status { color: #f0f; font-size: 11px; margin: 5px 0; text-transform: uppercase; }
</style>
</head>
<body>

<div class="box">
    <h2 style="text-shadow: 0 0 10px #0ff;">GHOSTY BYPASS ENGINE</h2>
    <p style="font-size: 10px; color: #666;">DECODING BASE64 + UTF-8 + ESCAPED DATA</p>
    
    <textarea id="input" placeholder="PASTE FULL PROTECTED HTML HERE..."></textarea>
    
    <div id="status">Engine Status: IDLE</div>
    
    <button class="btn" onclick="godModeDecode()">FORCE DEOBFUSCATE</button>
    
    <textarea id="output" placeholder="CLEAN SOURCE CODE..." readonly></textarea>
    <button class="btn" style="background: #111; color: #0ff; border: 1px solid #0ff;" onclick="copyData()">COPY CLEAN CODE</button>
</div>

<script>
function godModeDecode() {
    let raw = document.getElementById('input').value;
    let status = document.getElementById('status');
    let out = document.getElementById('output');

    try {
        // 1. Find the largest string inside any quotes (The Payload)
        let matches = raw.match(/["']([A-Za-z0-9+/=]{50,})["']/);
        let b64 = matches ? matches[1] : raw.trim();

        // 2. CRITICAL CLEANING: Remove anything NOT valid Base64 (spaces, \n, \r, etc)
        // This stops the "Data Corrupted" error
        b64 = b64.replace(/[^A-Za-z0-9+/=]/g, "");

        // 3. AUTO-PADDING: Ensure length is multiple of 4
        while (b64.length % 4 !== 0) { b64 += "="; }

        // 4. DECODE
        let binary = atob(b64);
        
        // 5. UTF-8 CONVERSION (Handles Urdu/Special characters in your toolkit)
        let result = "";
        try {
            result = decodeURIComponent(escape(binary));
        } catch(e) {
            result = binary; // Fallback to raw if not URI encoded
        }

        if (result.length < 5) throw new Error("Result too short");

        out.value = result;
        status.innerText = "SUCCESS: BYPASS COMPLETE";
        status.style.color = "#0ff";
    } catch (err) {
        status.innerText = "ERROR: STRING STILL INVALID. TRY COPYING ONLY THE TEXT BETWEEN THE QUOTES.";
        status.style.color = "#f00";
    }
}

function copyData() {
    let o = document.getElementById('output');
    o.select();
    document.execCommand('copy');
    alert("Copied to Clipboard!");
}
</script>

</body>
</html>
